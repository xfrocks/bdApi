<xf:title>{{ phrase('bdapi_logs') }}</xf:title>

<div class="block">
    <div class="block-container">
        <div class="block-body">
            <xf:datalist>
                <xf:datarow rowtype="subSection">
                    <xf:cell>{{ phrase('bdapi_client_id') }}</xf:cell>
                    <xf:cell>{{ phrase('user_name') }}</xf:cell>
                    <xf:cell>{{ phrase('bdapi_log_request_uri') }}</xf:cell>
                    <xf:cell>{{ phrase('bdapi_log_request_date') }}</xf:cell>
                    <xf:cell></xf:cell>
                </xf:datarow>
                <xf:foreach loop="$logs" value="$log">
                    <xf:datarow>
                        <xf:cell>{$log.client_id}</xf:cell>
                        <xf:cell>{{ $log.User ? $log.User.username : '' }}</xf:cell>
                        <xf:cell>{$log.request_uri}</xf:cell>
                        <xf:cell><xf:date time="$log.request_date" /></xf:cell>
                        <xf:cell>
                            <xf:button href="{{ link('api-logs', $log) }}"
                                       class="button--link"
                                       overlay="true"><i class="fa fa-eye" aria-hidden="true"></i></xf:button>
                        </xf:cell>
                    </xf:datarow>
                </xf:foreach>
            </xf:datalist>
        </div>
    </div>

    <div class="block-outer block-outer--after">
        <xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}" link="api-logs" />
    </div>
</div>